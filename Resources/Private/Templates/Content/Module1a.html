{namespace flux=FluidTYPO3\Flux\ViewHelpers}
{namespace v=Tx_Vhs_ViewHelpers}

<div xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://fluidtypo3.org/schemas/fluid-master.xsd"
     xmlns:flux="http://fluidtypo3.org/schemas/flux-master.xsd"
     xmlns:v="http://fluidtypo3.org/schemas/vhs-master.xsd">

    <f:layout name="Content"/>

    <f:section name="Configuration">

        {v:var.typoscript(path: 'plugin.tx_ecfmfluidcontent.settings') -> v:var.set(name: 'settings')}
        {f:if(condition: settings.gridColumns, then: settings.gridColumns, else: 12) -> v:var.set(name: 'numberOfColumns')}

        <flux:form wizardTab="CFM Inhalts Module" id="module1a" icon="{v:extension.path.resources(path: 'Icons/icon-cfm.gif')}">
            <flux:form.sheet name="leftcontent">
                <flux:field.input name="lefttitle"/>
                <flux:field.text name="lefttext"/>
            </flux:form.sheet>

            <flux:form.sheet name="rightcontent">

                <flux:grid>
                    <flux:grid.row>
                        <flux:grid.column>
                            <flux:form.content name="content"/>
                        </flux:grid.column>
                    </flux:grid.row>
                </flux:grid>

            </flux:form.sheet>
        </flux:form>

        <flux:flexform.grid>
            <flux:flexform.grid.row>
                <flux:flexform.grid.column colPos="0" name="Page content" />
            </flux:flexform.grid.row>
        </flux:flexform.grid>

    </f:section>

    <f:section name="Main">
        <table>
            <tr>
                <th colspan="2">Inhalt vom Typ: Modul 1</th>
            </tr>
            <tr>
                <td width="50%">
                    <f:if condition="lefttitle"><h2>{lefttitle}</h2></f:if>
                    <f:if condition="lefttext"><small>{lefttext}</small></f:if>
                </td>
                <td width="50%">
                    <flux:content.render area="content"/>
                </td>
            </tr>
        </table>


    </f:section>

    <f:section name="Preview">
        <table width="100%" border="0">
            <tr>
                <td colspan="3"><strong>Inhaltselement: Modul 1</strong></td>
            </tr>
            <tr>
                <td width="49%">
                    <f:if condition="lefttitle"><h2>{lefttitle}</h2><br /></f:if>
                    <f:if condition="{lefttext}"><f:format.crop maxCharacters="100">{lefttext}</f:format.crop><br /></f:if>
                </td>
                <td width="2%">&nbsp;</td>
                <td width="49%">
                    <flux:widget.grid/>
                </td>
            </tr>

        </table>


    </f:section>

    <f:section name="Value">col-md-{iteration.cycle}{f:if(condition: iteration.isLast, else: ',')}</f:section>









    <f:section name="SharedObjectFields">
        <flux:field.input name="header" label="Optional header for caption"/>
        <flux:field.text name="caption" label="Optional caption body text" enableRichText="TRUE"/>
        <flux:field.file name="iconImage" label="Optional Image for Navigation Dots"/>
    </f:section>

    <f:section name="Image">
        <f:image src="{elementData.file}" alt="{elementData.header}" width="{settings.carousel.width}"/>
    </f:section>

    <f:section name="Content">
        <div class="container">
            <flux:content.render area="{elementData.id}"/>
        </div>
    </f:section>

    <f:section name="Text">
        <div class="container">
            <f:if condition="{elementData.title}">
                <{elementData.size}>
                {elementData.title -> f:format.htmlentities()}
            </{elementData.size}>
            </f:if>
            {elementData.text -> f:format.html()}
        </div>
    </f:section>
</div>
